<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INZORA-X — Live Sensor Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        /* --- 1. THEME VARIABLES (Light/Dark Mode Control) --- */
        :root {
            --bg-color: #f0f2f5; 
            --card-bg: #ffffff; 
            --text-color: #212529; 
            --primary-color: #0d6efd; 
            --danger-color: #dc3545; 
            --temp-color: #dc3545; 
            --humidity-color: #17a2b8; 
            --gas-color: #ffc107; 
            --vibration-color: #0d6efd; 
            --accel-color: #28a745; 
            --shadow-color: rgba(0, 0, 0, 0.08); 

            /* Variables for button styles */
            --primary: var(--primary-color);
            --primary-dark: #0b5ed7;
            --warning: #ffc107;
            --success: #28a745;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --bg-color: #151f2f; /* Deeper dark blue background */
            --card-bg: #1e1e1e; 
            --text-color: #e0e0e0;
            --shadow-color: rgba(255, 255, 255, 0.05);
            --shadow: rgba(255, 255, 255, 0.05);
        }

        /* --- Custom 5-column layout for top row (20% width) --- */
        @media (min-width: 992px) { 
            .col-lg-2-4 {
                flex: 0 0 auto;
                width: 20%;
            }
        }

        /* --- 2. BASE STYLES & LAYOUT --- */
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.4s, color 0.4s;
            overflow-x: hidden; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Navbar Polish */
        .navbar {
            border-bottom: 1px solid var(--shadow-color);
            background-color: var(--card-bg);
            box-shadow: 0 2px 8px var(--shadow-color);
            z-index: 1020; 
        }

        /* Card Polish and Animation */
        .card {
            background-color: var(--card-bg);
            color: var(--text-color);
            border: none; 
            border-radius: 12px;
            box-shadow: 0 6px 16px var(--shadow-color); 
            transition: all 0.3s ease-in-out;
            position: relative; 
            overflow: hidden; 
            
            /* Load-in Animation */
            opacity: 0; 
            transform: translateY(20px); 
            animation: card-fade-in 0.6s ease-out forwards; 
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        
        .metric-label {
            font-weight: 600;
            color: var(--text-color);
            opacity: 0.8;
            display: flex;
            align-items: center;
            font-size: 0.95rem;
        }

        .metric-value {
            font-size: 3.2rem; 
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1.1;
            margin-top: 5px;
        }
        
        .chart-container {
            height: 250px;
        }

        /* Accelerometer Detail Polish */
        .accel-detail {
            font-size: 1.1rem;
            padding: 5px 0;
            border-bottom: 1px solid rgba(100, 100, 100, 0.1);
        }
        .accel-detail:last-child {
            border-bottom: none;
        }
        .accel-detail span {
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Table Style Polish */
        .table {
            color: var(--text-color);
        }
        .table thead th {
            border-bottom: 2px solid var(--text-color);
            opacity: 0.6;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        /* --- DARK MODE TABLE FIX --- */
        body.dark-mode .table {
            color: var(--text-color); 
        }
        body.dark-mode .table thead th {
            border-bottom: 2px solid #555;
            background-color: var(--card-bg); 
        }
        body.dark-mode .table tbody tr td { 
            background-color: var(--card-bg) !important; 
            color: var(--text-color); 
        }
        body.dark-mode .table tbody tr:hover td {
            background-color: rgba(255, 255, 255, 0.1) !important;
        }
        /* --- END DARK MODE TABLE FIX --- */

        /* --- 3. ANIMATION & ALERT REFINEMENT --- */

        @keyframes card-fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* VIBRATION CARD ALERT */
        .card.alert-vibration {
            border: 3px solid var(--danger-color);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
            animation: card-shake 0.15s infinite; 
        }
        .vibration-detected {
            color: var(--danger-color) !important; 
            font-weight: bold;
        }

        @keyframes card-shake {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-3px, -1px); }
            75% { transform: translate(3px, 1px); }
        }

        /* Animated Icons */
        .animated-icon {
            position: absolute;
            top: 5px; 
            right: 15px; 
            font-size: 5.5rem; 
            opacity: 0.2; 
            z-index: 1; 
            pointer-events: none; 
        }

        .temp-icon { color: var(--temp-color); animation: heat-pulse 2s ease-in-out infinite alternate; }
        .humidity-icon { color: var(--humidity-color); animation: mist-rise 3s ease-in-out infinite alternate; font-size: 4.5rem; }
        .gas-icon { color: var(--gas-color); animation: gas-flow 4s ease-in-out infinite; }
        .accel-z-icon { color: var(--accel-color); animation: pulse 3s ease-in-out infinite alternate; font-size: 4.5rem; }
        .vibration-icon { color: var(--vibration-color); font-size: 4rem; opacity: 0.2; animation: vibe-subtle 4s ease-in-out infinite; }
        .card.alert-vibration .vibration-icon {
            color: var(--danger-color); 
            opacity: 0.8;
            animation: shake 0.1s infinite;
        }

        /* Keyframes */
        @keyframes heat-pulse { 0% { transform: translateY(0px) scale(0.9); } 100% { transform: translateY(-5px) scale(1.1); } }
        @keyframes mist-rise { 0% { transform: translateY(0px) scaleX(1); opacity: 0.3; } 50% { transform: translateY(-8px) scaleX(1.05); opacity: 0.5; } 100% { transform: translateY(0px) scaleX(1); opacity: 0.3; } }
        @keyframes gas-flow { 0% { transform: scale(1); opacity: 0.3; } 50% { transform: scale(1.1); opacity: 0.5; } 100% { transform: scale(1); opacity: 0.3; } }
        @keyframes vibe-subtle { 0%, 100% { transform: rotate(0deg); } 50% { transform: rotate(1deg); } }
        @keyframes shake { 0%, 100% { transform: translateX(0) rotate(0deg); } 25% { transform: translateX(-5px) rotate(-3deg); } 75% { transform: translateX(5px) rotate(3deg); } }
        @keyframes pulse { 0% { opacity: 0.2; } 100% { opacity: 0.5; } }
        
        /* --- 4. BUTTON STYLES --- */
        .action-btn {
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: background-color 0.2s, transform 0.1s;
            font-size: 0.9rem;
            white-space: nowrap; 
            box-shadow: 0 2px 4px var(--shadow);
        }
        .action-btn i {
            margin-right: 5px;
        }
        .primary-btn {
            background: var(--primary);
            color: white;
        }
        .primary-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="p-0">
    
    <nav class="navbar navbar-expand-lg sticky-top p-3">
        <div class="container-fluid">
            <span class="navbar-brand h1 mb-0 fw-bold" style="color: var(--primary-color);">
                <i class="bi bi-broadcast me-2"></i> INZORA-X
            </span>
            <span class="text-muted small me-auto ms-3 d-none d-md-inline">
                Real-time monitoring dashboard
            </span>
            
            <div>
                <button class="btn btn-outline-secondary me-2" id="theme-toggle">
                    <i class="bi bi-sun"></i> Light Mode
                </button>
                <button class="btn btn-primary action-btn" id="download-csv-btn">
                    <i class="bi bi-download"></i> Download Data
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container-fluid p-4">
        <div class="row g-4">
            
            <div class="col-md-6 col-lg-2-4">
                <div class="card p-4 h-100" id="temp-card">
                    <div class="metric-label mb-2">
                        <i class="bi bi-thermometer-half me-2"></i> Temperature
                    </div>
                    <div class="metric-value" id="metric-temp">30.5 °C</div>
                    <small class="text-muted mt-auto">Last Update: <span id="temp-timestamp">19:14:48</span></small>
                    <i class="bi bi-thermometer-half animated-icon temp-icon"></i>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-2-4">
                <div class="card p-4 h-100" id="hum-card">
                    <div class="metric-label mb-2">
                        <i class="bi bi-droplet me-2"></i> Humidity
                    </div>
                    <div class="metric-value" id="metric-hum">69 %</div>
                    <small class="text-muted mt-auto">Last Update: <span id="hum-timestamp">19:14:48</span></small>
                    <i class="bi bi-cloud-haze animated-icon humidity-icon"></i>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-2-4">
                <div class="card p-4 h-100" id="gas-card">
                    <div class="metric-label mb-2">
                        <i class="bi bi-cloud-haze2 me-2"></i> Gas (MQ6)
                    </div>
                    <div class="metric-value" id="metric-gas">502</div>
                    <small class="text-muted mt-auto">Last Update: <span id="gas-timestamp">19:14:48</span></small>
                    <i class="bi bi-cloud-haze2 animated-icon gas-icon"></i>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-2-4" id="vib-col">
                <div class="card p-4 h-100" id="vib-card"> 
                    <div class="metric-label mb-2">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i> Vibration Alert
                    </div>
                    <div class="metric-value" id="metric-vib">NO</div> 
                    <small class="text-muted mt-auto">Last Update: <span id="vib-timestamp">19:14:48</span></small>
                    <i class="bi bi-cpu animated-icon vibration-icon"></i> 
                </div>
            </div>

            <div class="col-md-6 col-lg-2-4">
                <div class="card p-4 h-100" id="accel-z-card"> 
                    <div class="metric-label mb-2">
                        <i class="bi bi-arrow-up-down me-2"></i> Accel Z (Vertical)
                    </div>
                    <div class="metric-value" id="metric-accel-z">1.16</div> 
                    <small class="text-muted mt-auto">Units: m/s²</small>
                    <i class="bi bi-arrow-up-down animated-icon accel-z-icon"></i> 
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card p-3">
                    <h5 class="card-title"><i class="bi bi-graph-up me-1" style="color: var(--temp-color);"></i> Temperature Trend</h5>
                    <div class="chart-container">
                        <canvas id="tempChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card p-3">
                    <h5 class="card-title"><i class="bi bi-graph-up me-1" style="color: var(--humidity-color);"></i> Humidity Trend</h5>
                    <div class="chart-container">
                        <canvas id="humChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card p-3">
                    <h5 class="card-title"><i class="bi bi-graph-up me-1" style="color: var(--gas-color);"></i> Gas Levels (ADC)</h5>
                    <div class="chart-container">
                        <canvas id="gasChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card p-3 h-100">
                    <h5 class="card-title mb-3"><i class="bi bi-speedometer2"></i> Accelerometer X/Y (m/s²)</h5>
                    <div class="accel-detail">X-Axis: <span id="accel-x">0.086</span></div>
                    <div class="accel-detail">Y-Axis: <span id="accel-y">-9.397</span></div>
                </div>
            </div>
            
            <div class="col-md-9">
                <div class="card p-3"> 
                    <h5 class="card-title"><i class="bi bi-table"></i> Latest Records</h5>
                    <div class="table-responsive">
                        <table class="table table-sm table-borderless mb-0 align-middle">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Timestamp</th>
                                    <th>Temp (°C)</th>
                                    <th>Hum (%)</th>
                                    <th>Gas (ADC)</th>
                                    <th>Acc X</th>
                                    <th>Acc Y</th>
                                    <th>Acc Z</th>
                                    <th>Vib</th>
                                </tr>
                            </thead>
                            <tbody id="data-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>

    <script>
        // --- 1. THEME TOGGLE LOGIC ---
        const themeToggle = document.getElementById('theme-toggle');
        const body = document.body;
        let chartInstances = {};

        function updateThemeButton(isDark) {
            if (!themeToggle) return;
            themeToggle.innerHTML = isDark 
                ? '<i class="bi bi-moon"></i> Dark Mode' 
                : '<i class="bi bi-sun"></i> Light Mode';
            themeToggle.classList.toggle('btn-dark', isDark);
            themeToggle.classList.toggle('btn-outline-secondary', !isDark); 
        }

        function updateChartsTheme(isDark) {
            const axisColor = isDark ? '#e0e0e0' : '#212529';
            const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';

            Object.values(chartInstances).forEach(chart => {
                if (chart && chart.options && chart.options.scales) {
                    chart.options.scales.x.ticks.color = axisColor;
                    chart.options.scales.y.ticks.color = axisColor;
                    chart.options.scales.y.grid.color = gridColor;
                    chart.update();
                }
            });
        }

        function applyTheme(isDark) {
            body.classList.toggle('dark-mode', isDark);
            const currentTheme = isDark ? 'dark' : 'light';
            localStorage.setItem('theme', currentTheme);
            updateThemeButton(isDark);
            // Re-render charts to apply theme colors correctly
            if (Object.keys(chartInstances).length > 0) {
                renderCharts(); 
            }
        }

        function loadTheme() {
            const storedTheme = localStorage.getItem('theme') || 'light';
            const isDark = storedTheme === 'dark';
            applyTheme(isDark);
        }

        themeToggle.addEventListener('click', () => {
            const isCurrentlyDark = body.classList.contains('dark-mode');
            applyTheme(!isCurrentlyDark); // Toggle the theme
        });

        // --- 2. CHART.JS CONFIGURATION & RENDERING ---
        
        let labels = ['16:01', '16:28', '16:55', '17:20', '17:52', '18:29', '00:50', '08:53', '14:39', '14:45', '14:48'];
        let tempValues = [30.6, 30.5, 30.5, 30.4, 30.5, 30.5, 31.3, 31.2, 30.8, 30.6, 30.5];
        let humValues = [68.5, 69.0, 68.5, 69.0, 69.0, 69.0, 70.8, 71.8, 69.5, 69.0, 69.0];
        let gasValues = [495, 500, 490, 500, 500, 505, 510, 515, 505, 500, 502];

        const getChartOptions = (color) => {
            const isDark = document.body.classList.contains('dark-mode');
            const axisColor = isDark ? '#e0e0e0' : '#212529'; 
            const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            
            return {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: { bodyFont: { size: 14 } } },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: { color: axisColor, font: { size: 12 } }
                    },
                    y: {
                        grid: { color: gridColor },
                        ticks: { color: axisColor, font: { size: 12 } }
                    }
                },
                elements: { line: { tension: 0.4, borderWidth: 3 }, point: { radius: 4, hoverRadius: 6, backgroundColor: color } },
                animation: { duration: 1000, easing: 'easeInOutQuad' }
            };
        };

        const createChart = (ctxId, label, data, color) => {
            if (chartInstances[ctxId]) { chartInstances[ctxId].destroy(); }

            chartInstances[ctxId] = new Chart(document.getElementById(ctxId), {
                type: 'line',
                data: {
                    labels: labels, 
                    datasets: [{
                        label: label, data: data, borderColor: color,
                        backgroundColor: 'transparent', pointBackgroundColor: color,
                        pointBorderColor: '#fff',
                        pointHoverBorderColor: color,
                    }]
                },
                options: getChartOptions(color)
            });
        };
        
        function renderCharts() {
            // Get colors from CSS variables for dynamic charting
            const tempColor = getComputedStyle(document.documentElement).getPropertyValue('--temp-color');
            const humColor = getComputedStyle(document.documentElement).getPropertyValue('--humidity-color');
            const gasColor = getComputedStyle(document.documentElement).getPropertyValue('--gas-color');

            createChart('tempChart', 'Temperature (°C)', tempValues, tempColor); 
            createChart('humChart', 'Humidity (%)', humValues, humColor); 
            createChart('gasChart', 'Gas Level (ADC)', gasValues, gasColor); 
        }

        // --- 3. REAL-TIME SIMULATION & INTERACTIVITY ---

        let recordId = 201; 
        const VIBRATION_PROBABILITY = 0.15; 
        const MAX_TABLE_ROWS = 20; 

        function generateRecord(id, baseTime) {
            // Simulated sensor data generation
            const temp = parseFloat((30.0 + Math.random() * 1.5).toFixed(1));
            const hum = Math.round(68 + Math.random() * 3);
            const gas = Math.round(490 + Math.random() * 30);
            const accX = parseFloat((Math.random() * 10 - 5).toFixed(3));
            const accY = parseFloat((-9.8 + Math.random() * 0.5).toFixed(3));
            const accZ = parseFloat((Math.random() * 5 - 2).toFixed(3));
            
            const isVibrating = Math.random() < VIBRATION_PROBABILITY;
            const vibStatus = isVibrating ? 'DETECTED' : 'NO';

            return {
                id: id,
                time: baseTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false }),
                temp: temp,
                hum: hum,
                gas: gas,
                accX: accX,
                accY: accY,
                accZ: accZ,
                vib: vibStatus,
                isVibrating: isVibrating
            };
        }
        
        function initializeTable() {
            const tableBody = document.getElementById('data-table-body');
            tableBody.innerHTML = ''; 
            const initialCount = 10;
            const now = new Date();
            
            for (let i = initialCount; i > 0; i--) {
                const pastTime = new Date(now.getTime() - (i * 7000)); 
                const record = generateRecord(recordId - initialCount + i, pastTime);
                const newRow = tableBody.insertRow(-1); 
                
                newRow.innerHTML = `
                    <td>${record.id}</td>
                    <td>${record.time}</td>
                    <td>${record.temp}</td>
                    <td>${record.hum}</td>
                    <td>${record.gas}</td>
                    <td>${record.accX}</td>
                    <td>${record.accY}</td>
                    <td>${record.accZ}</td>
                    <td class="${record.isVibrating ? 'text-danger fw-bold' : ''}">${record.vib}</td>
                `;
            }
            recordId = recordId - 1 + initialCount;
        }

        function simulateRealTimeUpdate() {
            recordId++;
            const now = new Date();
            const record = generateRecord(recordId, now);

            // B. Get Card Elements
            const vibCard = document.getElementById('vib-card'); 
            const vibValue = document.getElementById('metric-vib');

            // C. Apply Alert Logic 
            const primaryColor = getComputedStyle(document.documentElement).getPropertyValue('--primary-color');
            const dangerColor = getComputedStyle(document.documentElement).getPropertyValue('--danger-color');

            if (record.isVibrating) {
                vibCard.classList.add('alert-vibration');
                vibValue.classList.add('vibration-detected');
                vibValue.style.color = dangerColor;
            } else {
                vibCard.classList.remove('alert-vibration');
                vibValue.classList.remove('vibration-detected');
                vibValue.style.color = primaryColor;
            }

            // D. Update Metric Cards
            document.getElementById('metric-temp').textContent = `${record.temp} °C`;
            document.getElementById('temp-timestamp').textContent = record.time;

            document.getElementById('metric-hum').textContent = `${record.hum} %`;
            document.getElementById('hum-timestamp').textContent = record.time;

            document.getElementById('metric-gas').textContent = record.gas;
            document.getElementById('gas-timestamp').textContent = record.time;

            vibValue.textContent = record.vib;
            document.getElementById('vib-timestamp').textContent = record.time;

            document.getElementById('accel-x').textContent = record.accX;
            document.getElementById('accel-y').textContent = record.accY;
            document.getElementById('metric-accel-z').textContent = record.accZ; 

            // E. Update Charts
            labels.push(record.time.slice(3)); 
            tempValues.push(record.temp);
            humValues.push(record.hum);
            gasValues.push(record.gas);

            if (labels.length > 15) {
                labels.shift();
                tempValues.shift();
                humValues.shift();
                gasValues.shift();
            }

            renderCharts();

            // F. Update Table (Add new row to the top)
            const tableBody = document.getElementById('data-table-body');
            const newRow = tableBody.insertRow(0); 

            newRow.innerHTML = `
                <td>${record.id}</td>
                <td>${record.time}</td>
                <td>${record.temp}</td>
                <td>${record.hum}</td>
                <td>${record.gas}</td>
                <td>${record.accX}</td>
                <td>${record.accY}</td>
                <td>${record.accZ}</td>
                <td class="${record.isVibrating ? 'text-danger fw-bold' : ''}">${record.vib}</td>
            `;

            // Limit table rows
            if (tableBody.rows.length > MAX_TABLE_ROWS) {
                tableBody.deleteRow(tableBody.rows.length - 1);
            }
        }

        // --- 4. CSV DOWNLOAD FUNCTIONALITY ---

        function downloadCSV() {
            const table = document.querySelector('.table');
            let csv = [];
            
            // 1. Get the headers
            const headers = Array.from(table.querySelectorAll('thead th')).map(th => th.innerText);
            csv.push(headers.join(','));
            
            // 2. Get the data rows (only visible rows)
            const rows = table.querySelectorAll('tbody tr');
            rows.forEach(row => {
                const rowData = Array.from(row.querySelectorAll('td')).map(td => {
                    // Escape commas and quotes for proper CSV formatting
                    let cellText = td.innerText.trim();
                    if (cellText.includes(',') || cellText.includes('"') || cellText.includes('\n')) {
                        cellText = `"${cellText.replace(/"/g, '""')}"`;
                    }
                    return cellText;
                });
                csv.push(rowData.join(','));
            });
            
            const csvString = csv.join('\n');
            
            // 3. Create a blob and trigger download
            const blob = new Blob([csvString], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            
            link.setAttribute("href", url);
            
            // Set dynamic filename
            const now = new Date();
            const filename = `INZORA-X_Sensor_Data_${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}.csv`;
            
            link.setAttribute("download", filename);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // G. Event Listeners
        document.getElementById('download-csv-btn').addEventListener('click', downloadCSV);

        document.querySelectorAll('.action-btn').forEach(button => {
            button.addEventListener('click', (event) => {
                const action = event.currentTarget.textContent.trim();
                // Avoid redundant alert for the download button
                if (!action.includes('Download Data')) {
                    alert(`Action "${action}" triggered. (Functionality coming soon!)`);
                }
            });
        });

        // Initial render and start simulation
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            initializeTable();
            renderCharts();
            // Update every 3 seconds
            setInterval(simulateRealTimeUpdate, 3000); 
            simulateRealTimeUpdate(); 
        });
    </script>
</body>
</html>